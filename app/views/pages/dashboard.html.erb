
<div class="container">
  <h2>Work-spaces you have available for rent:</h2>
  <div class="cards d-grid p-2 mt-6">
    <%  @spaces.each do |space| %>
      <%= render "spaces/card", space: space %>
    <% end %>
  </div>
</div>
<%# My Spaces Tab %>

  <div class="card" style="width: 18rem;">
    <img src="..." class="card-img-top" alt="...">
    <div class="card-body">
      <h5 class="card-title">My Spaces</h5>
      <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
    </div>
    <ul class="list-group list-group-flush">
      <li class="list-group-item">An item</li>
      <li class="list-group-item">A second item</li>
      <li class="list-group-item">A third item</li>
    </ul>
    <div class="card-body">
      <a href="#" class="card-link">Card link</a>
      <a href="#" class="card-link">Another link</a>
    </div>
  </div>



<div class= "row">
  <div class = "col">
   <h2>My Spaces</h2>
    <div class="container mt-4 ">
      <% if @spaces %>
        <div class="cards d-grid p-2">
          <% @spaces.each do |space| %>
            <div class="card-myspace">
              <h4><%= space.name %></h4>
                <%# booking requests %>
              <div>
                <h6>Booking Requests:</h6>
                <ol>
                <% space.bookings.each do |booking|%>
                  <% if booking.status == "pending" %>
                    <li><p><%= booking.user.email %></p></li>
                    <p>Confirm Booking?</p>
                    <%= link_to accept_booking_path(booking), data: {turbo_method: :patch} do %>
                      <p>YES</p>
                    <% end %>
                    <%= link_to reject_booking_path(booking), data: {turbo_method: :patch} do %>
                      <p>NO<p>
                    <% end %>
                  <% end %>
                <% end %>
                </ol>
              </div>
              <%# confirmed/current bookings %>
              <div>
                <h6>Confirmed Bookings:</h6>
                  <ol>
                  <% space.bookings.each do |booking|%>
                    <li><%= booking.user.email %></li>
                  <% end %>
                </ol>
              </div>
            </div>
            <% end%>
        </div>
      <% else %>
        <h4>You aint got no Spaces</h4>
      <% end %>
    </div>
  </div>
</div>

<br>

<%# My Bookings %>


<h2>My Bookings</h2>

<div class="container mt-4 ">
  <% if @bookings %>
    <div class="cards d-grid p-2">
      <div class="card-myspace">
          <h4>Confirmed bookings</h4>
            <ol>
              <% @current_bookings.each do |booking| %>
                <li><%=booking.space.name%></li>
              <% end %>
            </ol>
      </div>
      <div class="card-myspace">
          <h4>Pending bookings</h4>
            <ol>
              <% @future_bookings.each do |booking| %>
              <li><%=booking.space.name%></li>
              <% end %>
            </ol>
      </div>
      <div class="card-myspace">
        <h4>Past bookings</h4>
          <ol>
            <% @past_bookings.each do |booking| %>
            <li> <%=booking.space.name%></li>
            <% end %>
          </ol>
      </div>
    </div>
  <% end %>
</div>

</div>


